

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GPIO External Interrupt &mdash; Embedded Tutorials 1.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=cb963dba" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=fc837d61"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=f281be69"></script>
      <script src="../../_static/custom.js?v=5fde6192"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="USB" href="../usb.html" />
    <link rel="prev" title="GPIO Input" href="gpio_input.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Embedded Tutorials
              <img src="../../_static/club-logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../arduino_basics_tutorial.html">Arduino Basics Tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../stm32_basics_tutorial.html">STM32 Basics Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../basic_setup.html">Basic Setup</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../gpio.html">GPIO</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="gpio_output.html">GPIO Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="gpio_input.html">GPIO Input</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">GPIO External Interrupt</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../usb.html">USB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../swd.html">SWD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../uart.html">UART</a></li>
<li class="toctree-l2"><a class="reference internal" href="../timer.html">Timer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../intermediate_tutorial.html">Intermediate Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../highlights.html">Highlights</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Embedded Tutorials</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../stm32_basics_tutorial.html">STM32 Basics Tutorial</a></li>
          <li class="breadcrumb-item"><a href="../gpio.html">GPIO</a></li>
      <li class="breadcrumb-item active">GPIO External Interrupt</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/Robotics-Club-Pulchowk/EmbeddedTutorials/blob/main/source/stm32_basics_tutorial/gpio/gpio_ext_interrupt.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p>Previously, we have completed <a class="reference external" href="gpio_input.html">gpio input</a>.</p>
<section id="gpio-external-interrupt">
<h1>GPIO External Interrupt<a class="headerlink" href="#gpio-external-interrupt" title="Link to this heading"></a></h1>
<nav class="contents local" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id1">1. Introduction</a></p></li>
<li><p><a class="reference internal" href="#cubemx-configuration" id="id2">2. CubeMX Configuration</a></p></li>
<li><p><a class="reference internal" href="#code-to-toggle-led-using-external-interrupt" id="id3">3. Code to Toggle LED using External Interrupt</a></p></li>
<li><p><a class="reference internal" href="#observation" id="id4">4. Observation</a></p></li>
</ul>
</nav>
<section id="introduction">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">1. Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading"></a></h2>
<p>External interrupt is used to read the input pin asynchronously. It is used to read the input pin without polling the pin. The controller will execute the code only when the pin state changes.</p>
<p>Interrupt can be generated on the rising edge, falling edge, or both edges. It can also be generated on the low level or high level.</p>
<p>In this tutorial, we will see how to use external interrupt to detect rising edge signal on pin <code class="docutils literal notranslate"><span class="pre">PA0</span></code> i.e. button press and use it to toggle led.</p>
</section>
<section id="cubemx-configuration">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">2. CubeMX Configuration</a><a class="headerlink" href="#cubemx-configuration" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Open the <code class="docutils literal notranslate"><span class="pre">STM32CubeMX</span></code>, update pin <code class="docutils literal notranslate"><span class="pre">PA0</span></code> to <code class="docutils literal notranslate"><span class="pre">GPIO_EXTI0</span></code>.</p></li>
<li><p>From <code class="docutils literal notranslate"><span class="pre">Pinout</span> <span class="pre">&amp;</span> <span class="pre">Configuration</span></code>, go to <code class="docutils literal notranslate"><span class="pre">GPIO</span></code> and under <code class="docutils literal notranslate"><span class="pre">NVIC</span></code> tab, enable <code class="docutils literal notranslate"><span class="pre">EXTI</span> <span class="pre">line0</span> <span class="pre">intereupt</span></code>.</p></li>
</ul>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/gpio_exti_enable.webp"><img alt="gpio_exti_enable" class="align-center" src="../../_images/gpio_exti_enable.webp" style="width: 100%;" />
</a>
</div></blockquote>
<ul class="simple">
<li><p>Under <code class="docutils literal notranslate"><span class="pre">GPIO</span></code> tab, select <code class="docutils literal notranslate"><span class="pre">PA0-WKP</span></code> list. From <code class="docutils literal notranslate"><span class="pre">PA0-WKP</span> <span class="pre">Configuration</span></code>, check <code class="docutils literal notranslate"><span class="pre">GPIO</span> <span class="pre">Mode</span></code> to <code class="docutils literal notranslate"><span class="pre">External</span> <span class="pre">Interrupt</span> <span class="pre">Mode</span> <span class="pre">with</span> <span class="pre">Rising</span> <span class="pre">edge</span> <span class="pre">trigger</span> <span class="pre">detection</span></code>.</p></li>
</ul>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/gpio_exti_rising_edge.webp"><img alt="gpio_exti_rising_edge" class="align-center" src="../../_images/gpio_exti_rising_edge.webp" style="width: 100%;" />
</a>
</div></blockquote>
<ul class="simple">
<li><p>Generate code.</p></li>
</ul>
</section>
<section id="code-to-toggle-led-using-external-interrupt">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">3. Code to Toggle LED using External Interrupt</a><a class="headerlink" href="#code-to-toggle-led-using-external-interrupt" title="Link to this heading"></a></h2>
<ul>
<li><p>Open project folder. Navigate to <code class="docutils literal notranslate"><span class="pre">Core/Src/main.c</span></code>. Add <code class="docutils literal notranslate"><span class="pre">HAL_GPIO_EXTI_Callback</span></code> function above the <code class="docutils literal notranslate"><span class="pre">main</span></code> function.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* USER CODE BEGIN 0 */</span>
<span class="hll"><span class="kt">void</span><span class="w"> </span><span class="nf">HAL_GPIO_EXTI_Callback</span><span class="p">(</span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">GPIO_Pin</span><span class="p">)</span>
</span><span class="hll"><span class="p">{</span>
</span><span class="hll"><span class="w">  </span><span class="c1">// Toggle green led on pin PD12 when button is pressed.</span>
</span><span class="hll"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">GPIO_Pin</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">GPIO_PIN_0</span><span class="p">)</span>
</span><span class="hll"><span class="w">  </span><span class="p">{</span>
</span><span class="hll"><span class="w">    </span><span class="n">HAL_GPIO_TogglePin</span><span class="p">(</span><span class="n">GPIOD</span><span class="p">,</span><span class="w"> </span><span class="n">GPIO_PIN_12</span><span class="p">);</span>
</span><span class="hll"><span class="w">  </span><span class="p">}</span>
</span><span class="hll"><span class="p">}</span>
</span><span class="cm">/* USER CODE END 0 */</span>
</pre></div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">HAL_GPIO_EXTI_Callback(uint16_t</span> <span class="pre">GPIO_Pin)</span></code> is a callback function which is called when the external interrupt is generated. It is used to handle the interrupt. It is weakly defined inside <code class="docutils literal notranslate"><span class="pre">HAL</span> <span class="pre">Driver</span></code>.</p>
</div>
<ul>
<li><p>Update the <code class="docutils literal notranslate"><span class="pre">while</span></code> block of the <code class="docutils literal notranslate"><span class="pre">main</span></code> function to show processor can do other job simultaneously.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Infinite loop */</span>
<span class="cm">/* USER CODE BEGIN WHILE */</span>
<span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="p">{</span>
<span class="hll"><span class="w">  </span><span class="c1">// Toggle Orage Led Continously</span>
</span><span class="hll"><span class="w">  </span><span class="n">HAL_GPIO_TogglePin</span><span class="p">(</span><span class="n">GPIOD</span><span class="p">,</span><span class="w"> </span><span class="n">GPIO_PIN_13</span><span class="p">);</span>
</span><span class="hll"><span class="w">  </span><span class="n">HAL_Delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
</span><span class="w">  </span><span class="cm">/* USER CODE END WHILE */</span>

<span class="w">  </span><span class="cm">/* USER CODE BEGIN 3 */</span>
<span class="p">}</span>
<span class="cm">/* USER CODE END 3 */</span>
</pre></div>
</div>
</li>
<li><p>Build and flash the code.</p></li>
</ul>
</section>
<section id="observation">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">4. Observation</a><a class="headerlink" href="#observation" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Orage led on pin <code class="docutils literal notranslate"><span class="pre">PD13</span></code> blinking continuously.</p></li>
<li><p>Pressing the user button on pin <code class="docutils literal notranslate"><span class="pre">PA0</span></code>,  the green led on pin <code class="docutils literal notranslate"><span class="pre">PD12</span></code> toggles.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is possible that pressing the button toggles the led multiple times. This is because the button is mechanical and it bounces. We will see how to debounce the button in the later tutorial.</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="gpio_input.html" class="btn btn-neutral float-left" title="GPIO Input" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../usb.html" class="btn btn-neutral float-right" title="USB" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024 - 2025, Robotics Club, Pulchowk Campus.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>